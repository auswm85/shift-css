---
title: Menu
description: Dropdown menu with CSS Anchor Positioning and automatic viewport flipping
---

## Overview

The `s-menu` component provides dropdown menus using native `<details>` disclosure with CSS Anchor Positioning for automatic viewport edge detection and flipping. Works in all browsers with graceful fallback.

## Import

```css
/* Full framework (includes all components) */
@import "@shift-css/core";

/* Or import just the menu component */
@import "@shift-css/core/components/menu";
```

> **Note:** When importing individual components, you also need `@shift-css/core/reset` and `@shift-css/core/tokens` for the base styles and design tokens.

## Basic Usage

```html
<details s-menu>
  <summary s-menu-trigger s-btn="secondary">Options ▾</summary>
  <div s-menu-items>
    <button s-menu-item>Edit</button>
    <button s-menu-item>Duplicate</button>
    <button s-menu-item>Archive</button>
  </div>
</details>
```

The menu uses:
- Native `<details>/<summary>` for disclosure (no JS required)
- CSS Anchor Positioning with `anchor-scope` for auto-flipping
- Absolute positioning fallback for older browsers

## Position Variants

### Default (Bottom-Start)

Menu opens below the trigger, aligned to the start (left in LTR):

```html
<details s-menu>
  <summary s-menu-trigger s-btn="secondary">Default ▾</summary>
  <div s-menu-items>
    <button s-menu-item>Item 1</button>
    <button s-menu-item>Item 2</button>
  </div>
</details>
```

### End Aligned

Menu aligns to the end (right in LTR):

```html
<details s-menu="end">
  <summary s-menu-trigger s-btn="secondary">Options ▾</summary>
  <div s-menu-items>
    <button s-menu-item>Profile</button>
    <button s-menu-item>Settings</button>
    <button s-menu-item>Logout</button>
  </div>
</details>
```

### Top

Menu opens above the trigger:

```html
<details s-menu="top">
  <summary s-menu-trigger s-btn="secondary">Select ▴</summary>
  <div s-menu-items>
    <button s-menu-item>Option A</button>
    <button s-menu-item>Option B</button>
  </div>
</details>
```

### Top-End

Menu opens above, aligned to the end:

```html
<details s-menu="top-end">
  <summary s-menu-trigger s-btn="secondary">More ▴</summary>
  <div s-menu-items>
    <button s-menu-item>Settings</button>
    <button s-menu-item>Help</button>
  </div>
</details>
```

## Menu Items

### Basic Items

```html
<button s-menu-item>Edit</button>
<button s-menu-item>Duplicate</button>
<button s-menu-item>Delete</button>
```

### Danger Item

For destructive actions:

```html
<button s-menu-item s-danger>Delete permanently</button>
```

### Disabled Item

```html
<button s-menu-item disabled>Cannot edit</button>
```

### With Icons

```html
<button s-menu-item>
  <svg><!-- icon --></svg>
  Edit
</button>
```

## Dividers

Separate groups of related items:

```html
<div s-menu-items>
  <button s-menu-item>Edit</button>
  <button s-menu-item>Duplicate</button>
  <hr s-menu-divider>
  <button s-menu-item>Archive</button>
  <hr s-menu-divider>
  <button s-menu-item s-danger>Delete</button>
</div>
```

## Labels

Add section headers for grouped items:

```html
<div s-menu-items>
  <span s-menu-label>File</span>
  <button s-menu-item>New</button>
  <button s-menu-item>Open</button>
  <hr s-menu-divider>
  <span s-menu-label>Edit</span>
  <button s-menu-item>Cut</button>
  <button s-menu-item>Copy</button>
  <button s-menu-item>Paste</button>
</div>
```

## Complete Example

```html
<details s-menu>
  <summary s-btn="primary" s-menu-trigger>Actions ▾</summary>
  <div s-menu-items>
    <span s-menu-label>Document</span>
    <button s-menu-item>
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
      </svg>
      Edit
    </button>
    <button s-menu-item>Duplicate</button>
    <button s-menu-item>Move to...</button>
    <hr s-menu-divider>
    <span s-menu-label>Danger Zone</span>
    <button s-menu-item>Archive</button>
    <button s-menu-item s-danger>Delete</button>
  </div>
</details>
```

## Auto-Flip Behavior

In browsers that support CSS Anchor Positioning (Chrome 131+, Firefox 147+), menus automatically flip when they would overflow the viewport:

- Bottom menu near viewport bottom → flips to top
- End-aligned menu near right edge → flips to start
- Combinations work too (bottom-end → top-start)

This is handled by `position-try-fallbacks: flip-block, flip-inline` with no JavaScript required.

## Close on Item Click

Menus stay open after clicking an item (native `<details>` behavior). To close on click:

```js
document.querySelectorAll('[s-menu-item]').forEach(item => {
  item.addEventListener('click', () => {
    item.closest('details[s-menu]').open = false;
  });
});
```

## Accessibility

The native `<details>/<summary>` provides built-in accessibility:

- **Keyboard support**: Enter/Space toggles menu
- **Screen reader support**: Announces expanded/collapsed state
- **Focus management**: Summary is focusable by default

### Recommended Markup

For enhanced accessibility, add ARIA attributes:

```html
<details s-menu>
  <summary s-menu-trigger s-btn="secondary" aria-haspopup="menu">
    Options ▾
  </summary>
  <div s-menu-items role="menu">
    <button s-menu-item role="menuitem">Edit</button>
    <button s-menu-item role="menuitem">Delete</button>
  </div>
</details>
```

## Browser Support

| Feature | Chrome | Firefox | Safari |
|---------|--------|---------|--------|
| Basic menu | All | All | All |
| Auto-flip | 131+ | 147+ | No |

**Progressive Enhancement:** The menu works everywhere using absolute positioning. Browsers with `anchor-scope` support get automatic viewport edge detection and flipping.

## How It Works

The menu uses `anchor-scope` to isolate anchor names per menu instance:

```css
[s-menu] {
  position: relative;
  anchor-scope: --menu-trigger;
}

[s-menu-trigger] {
  anchor-name: --menu-trigger;
}

/* Fallback for all browsers */
[s-menu-items] {
  position: absolute;
  top: 100%;
  left: 0;
}

/* Progressive enhancement */
@supports (anchor-scope: all) {
  [s-menu-items] {
    position: absolute;
    position-anchor: --menu-trigger;
    inset-block-start: anchor(end);
    inset-inline-start: anchor(start);
    position-try-fallbacks: flip-block, flip-inline;
  }
}
```

## CSS Custom Properties

| Property | Description |
|----------|-------------|
| `--_menu-bg` | Background color |
| `--_menu-border` | Border color |
| `--_menu-radius` | Border radius |
| `--_menu-shadow` | Box shadow |
| `--_menu-min-width` | Minimum width (default: 10rem) |
| `--_menu-padding` | Internal padding |
| `--_menu-offset` | Gap between trigger and menu |

## All Attributes

| Attribute | Element | Purpose |
|-----------|---------|---------|
| `s-menu` | details | Menu wrapper (values: `end`, `top`, `top-end`) |
| `s-menu-trigger` | summary | Menu trigger button |
| `s-menu-items` | div | Menu content container |
| `s-menu-item` | button | Individual menu action |
| `s-menu-divider` | hr | Visual separator |
| `s-menu-label` | span | Section label |
| `s-danger` | Menu item | Destructive action styling |

## Customization Examples

### Custom Width

```css
[s-menu-items] {
  --_menu-min-width: 15rem;
}
```

### Custom Colors

```css
[s-menu-items] {
  --_menu-bg: var(--s-primary-900);
  --_menu-border: var(--s-primary-700);
}
```

### Remove Shadow

```css
[s-menu-items] {
  --_menu-shadow: none;
  --_menu-border: var(--s-border-default);
}
```

### Compact Menu

```css
[s-menu-items] {
  --_menu-padding: 0;
}

[s-menu-item] {
  padding: var(--s-space-1) var(--s-space-2);
  font-size: var(--s-text-xs);
}
```
